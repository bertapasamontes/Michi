<table class="table">
    <thead>
        <tr>
            @for(column of selectedColumns(); track column){
            <th scope="col">{{ column | titlecase }}</th>
            }
            <th scope="col">Acciones</th>
        </tr>
    </thead>
    <tbody>
        @for (row of filteredData(); track row) {
            <tr>
            @for(column of selectedColumns(); track column){

                @if(tipo === 'productos'){
                    @if(column == "imagen"){

                        <td><img src="{{row[column]}}" alt="img-{{row[column]}}" class="img-fluid img-product"></td>
                    }

                    @else if(column == "puntuación"){
                        <td>{{ row[column] }}⭐</td>
                    }
                    @else if(column === "comentarios"){
                    <td>
                        <div class="comentarios">
                            @for (comment of row[column]; track comment){
                                <span class="comentario">{{comment.text}}</span> -
                                <span class="username">&#64;{{comment.user?.username || 'Usuario desconocido'}}</span>
                                <br>
                            }
                        </div>
                    </td>
                    }
                    @else{
                        <td>{{ row[column] }}</td>
                    }
                }


                @else{
                <td>{{ row[column] }}</td>
                }
            }

            <td>
                <div class="d-inline-flex">
                    @if (tipo === 'usuarios' && row['id'] !== undefined) {
                <app-btn-editar [item]="row['id']" (updateData)="refreshData()"></app-btn-editar>
                }
                <app-btn-delete (removeItem)="onDeleteItem($event['id'], $event['tipo'])" [item]="row['id']"
                    [tipo]="tipo"></app-btn-delete>
                </div>
                
            </td>
        </tr>
        }


    </tbody>
</table>